; ===== Ollama =====
; Runs the Ollama server and (optionally) pulls models on first boot.

[program:ollama]
; Default to binding on all interfaces (overridable by passing OLLAMA_HOST in docker run)
command=/bin/bash -lc 'export OLLAMA_HOST="${OLLAMA_HOST:-0.0.0.0:11434}"; exec /usr/local/bin/ollama serve'
user=carbon
directory=/home/carbon
autostart=true
autorestart=true
startsecs=3
stdout_logfile=/var/log/ollama/ollama.out.log
stderr_logfile=/var/log/ollama/ollama.err.log
stopsignal=TERM
stopasgroup=true
killasgroup=true
priority=10

[program:ollama-model-pull]
command=/usr/local/bin/ollama-model-pull.sh
user=carbon
directory=/home/carbon
autostart=true
autorestart=false
startsecs=2
stdout_logfile=/var/log/ollama/ollama.pull.out.log
stderr_logfile=/var/log/ollama/ollama.pull.err.log
stopsignal=TERM
stopasgroup=true
killasgroup=true
priority=20
